{"version":3,"file":"Orders-CgvKM4PT.js","sources":["../../../../pages/Orders.vue"],"sourcesContent":["<template>\n  <div class=\"contain\" :class=\"useSidebar().value ? 'shrink' : ''\">\n    <div class=\"title-container\">\n      <div class=\"head-title\">\n        <h4 class=\"header4\">\n          {{ $i18n.locale === \"ar\" ? \"قائمة الطلبيات\" : \"Orders List\" }}\n        </h4>\n      </div>\n      <div class=\"options\">\n        <!-- <div class=\"d-flex flex-column-reverse mx-2\">\n          <input\n            v-model=\"searchText\"\n            id=\"price\"\n            type=\"text\"\n            required\n            :placeholder=\"$i18n.locale === 'ar' ? 'ابحث' : 'Search'\"\n          />\n        </div> -->\n        <div class=\"reload btn btn-success\" @click=\"getInfo()\">\n          <font-awesome :icon=\"['fas', 'rotate-right']\" />\n          {{ $i18n.locale === \"ar\" ? \"إعادة تحميل\" : \"Reload\" }}\n        </div>\n      </div>\n    </div>\n\n    <div class=\"table-responsive\">\n      <div class=\"loading\" v-if=\"loading\">\n        <img src=\"/loading/loadingnew2.svg\" alt=\"\" />\n      </div>\n      <div v-else class=\"product-tabel\">\n        <table>\n          <thead>\n            <tr>\n              <th>{{ $i18n.locale === \"ar\" ? \"الاسم\" : \"Name\" }}</th>\n              <th>\n                {{ $i18n.locale === \"ar\" ? \"السعر الكلي\" : \"Total Price\" }}\n              </th>\n              <th>{{ $i18n.locale === \"ar\" ? \"التاريخ\" : \"Date\" }}</th>\n              <th>\n                {{ $i18n.locale === \"ar\" ? \"نوع الدفع\" : \"Payment Type\" }}\n              </th>\n              <th>{{ $i18n.locale === \"ar\" ? \"الموقع\" : \"Location\" }}</th>\n              <!-- <th>{{ $i18n.locale === \"ar\" ? \"تعديل\" : \"Edit\" }}</th> -->\n            </tr>\n          </thead>\n          <tbody>\n            <tr class=\"rows\" v-for=\"product in Orders\" :key=\"product.id\">\n              <td class=\"fw-bold\">\n                {{ getCustomerName(product.customer_id) }}\n              </td>\n              <td>\n                <p class=\"badge rounded-pill bg-primary me-1\">\n                  ${{ product.total_price }}\n                </p>\n              </td>\n              <td class=\"fw-bold\">{{ product.created_at?.slice(0, 10) }}</td>\n\n              <td class=\"fw-bold\">\n                {{\n                  product.payment_id ?? $i18n.locale === \"ar\"\n                    ? \"لا يوجد\"\n                    : \"Not Found\"\n                }}\n              </td>\n              <td class=\"fw-bold\">\n                {{ getLocationName(product.location_id) }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nconst {\n  public: { api, apiBase },\n} = useRuntimeConfig();\nconst { locale } = useI18n();\nconst { $awn } = useNuxtApp();\n\nlet loading = ref(false);\nlet Orders = ref([]);\nconst getInfo = async () => {\n  loading.value = true;\n  if (locale.value === \"ar\") {\n    const { data: productsData, pending } = await useFetch(`${api.GetOrders}`, {\n      credentials: \"include\",\n      baseURL: apiBase,\n      headers: {\n        \"accept-language\": \"ar\",\n      },\n    });\n    watchEffect(() => {\n      if (process.client) {\n        if (productsData.value) {\n          Orders.value = productsData.value;\n        }\n      }\n    });\n  } else {\n    const { data: productsData, pending } = await useFetch(`${api.GetOrders}`, {\n      credentials: \"include\",\n      baseURL: apiBase,\n      headers: {\n        \"accept-language\": \"en\",\n      },\n    });\n    watchEffect(() => {\n      if (process.client) {\n        if (productsData.value) {\n          Orders.value = productsData.value;\n        }\n      }\n    });\n  }\n  loading.value = false;\n};\ngetInfo();\n\n// delete modal\nlet deleteProduct = ref();\nlet deleteModal = ref(false);\nconst updateDeleteModal = (value) => {\n  deleteModal.value = value;\n};\n\n// let searchText = ref(\"\");\n// const filteredArray = computed(() => {\n//   return Orders.value?.filter((item) =>\n//     item.plant_name.toLowerCase().includes(searchText.value.toLowerCase())\n//   );\n// });\n\nlet customers = ref([]);\nconst getCustomers = async () => {\n  loading.value = true;\n  if (locale.value === \"ar\") {\n    const { data: customersData, pending } = await useFetch(\n      `${api.GetAllCustomers}`,\n      {\n        credentials: \"include\",\n        baseURL: apiBase,\n        headers: {\n          \"accept-language\": \"ar\",\n        },\n      }\n    );\n    watchEffect(() => {\n      if (process.client) {\n        if (customersData.value) {\n          customers.value = customersData.value;\n        }\n      }\n    });\n  } else {\n    const { data: customersData, pending } = await useFetch(\n      `${api.GetAllCustomers}`,\n      {\n        credentials: \"include\",\n        baseURL: apiBase,\n        headers: {\n          \"accept-language\": \"en\",\n        },\n      }\n    );\n    watchEffect(() => {\n      if (process.client) {\n        if (customersData.value) {\n          customers.value = customersData.value;\n        }\n      }\n    });\n  }\n  loading.value = false;\n};\n// init get product\ngetCustomers();\n\nlet Loactions = ref([]);\nconst getLoactions = async () => {\n  loading.value = true;\n  if (locale.value === \"ar\") {\n    const { data: productsData, pending } = await useFetch(\n      `${api.GetAllLocations}`,\n      {\n        credentials: \"include\",\n        baseURL: apiBase,\n        headers: {\n          \"accept-language\": \"ar\",\n        },\n      }\n    );\n    watchEffect(() => {\n      if (process.client) {\n        if (productsData.value) {\n          Loactions.value = productsData.value;\n        }\n      }\n    });\n  } else {\n    const { data: productsData, pending } = await useFetch(\n      `${api.GetAllLocations}`,\n      {\n        credentials: \"include\",\n        baseURL: apiBase,\n        headers: {\n          \"accept-language\": \"en\",\n        },\n      }\n    );\n    watchEffect(() => {\n      if (process.client) {\n        if (productsData.value) {\n          Loactions.value = productsData.value;\n        }\n      }\n    });\n  }\n  loading.value = false;\n};\n//init\ngetLoactions();\n\nconst getCustomerName = (id) => {\n  let res = customers.value?.filter((e) => e.id == id);\n  return res[0]?.firstName + res[0]?.lastName;\n};\n\nconst getLocationName = (id) => {\n  let res = Loactions.value?.filter((e) => e.id == id);\n  return res[0]?.name;\n};\n</script>\n<style lang=\"scss\" scoped>\n.contain {\n  position: relative;\n  overflow-x: hidden;\n  min-height: calc(100vh - 77.6px);\n  transition: all 0.3s linear;\n  width: 100%;\n  background-color: #f8f7fa;\n  float: right;\n  margin-top: 77.6px;\n  padding: 16px;\n  @media (max-width: 600px) {\n    margin-top: 55px;\n    min-height: calc(100vh - 55px);\n  }\n\n  &.shrink {\n    width: calc(100% - 260px); /* 100% + 260px(sidebar)*/\n    @media (max-width: 600px) {\n      width: 100%;\n    }\n  }\n\n  .title-container {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin: 16px 0px;\n    @media (max-width: 991px) {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n    .head-title {\n      p {\n        font-size: 15px;\n        color: #6d6a77;\n        a {\n          color: #19ad7b;\n          text-decoration: underline;\n        }\n      }\n    }\n    .options {\n      display: flex;\n      align-items: center;\n      .reload {\n        background-color: #19ad7b;\n        color: #fff;\n        border: none;\n      }\n      @media (max-width: 991px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .table-responsive {\n    background-color: #fff;\n    border-radius: 8px;\n  }\n  .product-tabel {\n    height: calc(100vh - 274px);\n    overflow-y: scroll;\n    @media (max-width: 991px) {\n      height: calc(100vh - 320px);\n    }\n  }\n  .loading {\n    img {\n      width: 50px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n  thead,\n  tbody,\n  tfoot,\n  tr,\n  td,\n  th {\n    padding: 8px 15px;\n    white-space: nowrap;\n  }\n  table {\n    width: 100%;\n  }\n  thead {\n    background-color: #19ad7b;\n    color: #fff;\n  }\n  td {\n    color: #333;\n    max-width: 300px;\n    cursor: pointer;\n  }\n  .pagination {\n    select {\n      border: 1px solid #dbdbdb;\n      border-radius: 8px;\n      color: #333;\n      padding: 10px;\n      &:focus,\n      :focus-visible {\n        outline: none;\n      }\n    }\n    .page-item {\n      .page-link {\n        cursor: pointer;\n        border: none !important;\n        span {\n          color: #6b7280;\n          padding: 0.5rem 1rem;\n          @media (max-width: 768px) {\n            padding: 0;\n          }\n        }\n        &.page-num {\n          color: #19ad7b;\n        }\n      }\n    }\n    .show-info {\n      @media (max-width: 520px) {\n        display: none !important;\n      }\n    }\n  }\n\n  .rows {\n    color: #000;\n    &:nth-child(even) {\n      background-color: #eee;\n    }\n    &:nth-child(odd) {\n      background-color: #fff;\n    }\n    .product-img {\n      img {\n        width: 50px;\n        height: 50px;\n        margin-inline-end: 10px;\n        object-fit: contain;\n      }\n    }\n    .product-info {\n      h5,\n      p {\n        max-width: 200px;\n        /* will make [...] at the end */\n        text-overflow: ellipsis;\n        /* paragraph to one line */\n        white-space: nowrap;\n        /* older browsers */\n        overflow: hidden;\n        margin: 0;\n      }\n      p {\n        font-size: 14px;\n      }\n    }\n    .badge {\n      font-size: 16px;\n      padding: 8px 12px;\n      margin: 0;\n    }\n    .circle {\n      display: block;\n      width: 25px;\n      height: 25px;\n      border-radius: 50%;\n      border: 1px solid #cbc9c9;\n    }\n    .delete,\n    .edit {\n      padding: 6px;\n      color: #333;\n      svg {\n        font-size: 20px;\n      }\n    }\n  }\n}\n</style>\n"],"names":["Orders"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EM,UAAA;AAAA,MACJ,QAAQ,EAAE,KAAK,QAAQ;AAAA,QACrB,iBAAiB;AACf,UAAA,EAAE,WAAW;AAGf,QAAA,UAAU,IAAI,KAAK;AACnB,QAAAA,UAAS,IAAI,CAAA,CAAE;AACnB,UAAM,UAAU,YAAY;AAC1B,cAAQ,QAAQ;AACZ,UAAA,OAAO,UAAU,MAAM;AACe,cAAM,SAAS,GAAG,IAAI,SAAS,IAAI;AAAA,UACzE,aAAa;AAAA,UACb,SAAS;AAAA,UACT,SAAS;AAAA,YACP,mBAAmB;AAAA,UACrB;AAAA,QACD,GAAA,aAAA;AACD,oBAAY,MAAM;AAAA,QAKhB,CACD;AAAA,MAAA,OACI;AACmC,cAAM,SAAS,GAAG,IAAI,SAAS,IAAI;AAAA,UACzE,aAAa;AAAA,UACb,SAAS;AAAA,UACT,SAAS;AAAA,YACP,mBAAmB;AAAA,UACrB;AAAA,QACD,GAAA,aAAA;AACD,oBAAY,MAAM;AAAA,QAKhB,CACD;AAAA,MACH;AACA,cAAQ,QAAQ;AAAA,IAAA;AAEV;AAGY,QAAI;AACN,QAAI,KAAK;AAYvB,QAAA,YAAY,IAAI,CAAA,CAAE;AACtB,UAAM,eAAe,YAAY;AAC/B,cAAQ,QAAQ;AACZ,UAAA,OAAO,UAAU,MAAM;AACgB,cAAM;AAAA,UAC7C,GAAG,IAAI,eAAe;AAAA,UACtB;AAAA,YACE,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,cACP,mBAAmB;AAAA,YACrB;AAAA,UACF;AAAA,UACF;AAAA,QAAA;AACA,oBAAY,MAAM;AAAA,QAKhB,CACD;AAAA,MAAA,OACI;AACoC,cAAM;AAAA,UAC7C,GAAG,IAAI,eAAe;AAAA,UACtB;AAAA,YACE,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,cACP,mBAAmB;AAAA,YACrB;AAAA,UACF;AAAA,UACF;AAAA,QAAA;AACA,oBAAY,MAAM;AAAA,QAKhB,CACD;AAAA,MACH;AACA,cAAQ,QAAQ;AAAA,IAAA;AAGL;AAET,QAAA,YAAY,IAAI,CAAA,CAAE;AACtB,UAAM,eAAe,YAAY;AAC/B,cAAQ,QAAQ;AACZ,UAAA,OAAO,UAAU,MAAM;AACe,cAAM;AAAA,UAC5C,GAAG,IAAI,eAAe;AAAA,UACtB;AAAA,YACE,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,cACP,mBAAmB;AAAA,YACrB;AAAA,UACF;AAAA,UACF;AAAA,QAAA;AACA,oBAAY,MAAM;AAAA,QAKhB,CACD;AAAA,MAAA,OACI;AACmC,cAAM;AAAA,UAC5C,GAAG,IAAI,eAAe;AAAA,UACtB;AAAA,YACE,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,cACP,mBAAmB;AAAA,YACrB;AAAA,UACF;AAAA,UACF;AAAA,QAAA;AACA,oBAAY,MAAM;AAAA,QAKhB,CACD;AAAA,MACH;AACA,cAAQ,QAAQ;AAAA,IAAA;AAGL;AAEP,UAAA,kBAAkB,CAAC,OAAO;;AAC1B,UAAA,OAAM,eAAU,UAAV,mBAAiB,OAAO,CAAC,MAAM,EAAE,MAAM;AACjD,eAAO,SAAI,CAAC,MAAL,mBAAQ,eAAY,SAAI,CAAC,MAAL,mBAAQ;AAAA,IAAA;AAG/B,UAAA,kBAAkB,CAAC,OAAO;;AAC1B,UAAA,OAAM,eAAU,UAAV,mBAAiB,OAAO,CAAC,MAAM,EAAE,MAAM;AAC1C,cAAA,SAAI,CAAC,MAAL,mBAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}