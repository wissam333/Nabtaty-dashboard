import{_ as R}from"./C7It6wLV.js";import{_ as x}from"./BNkK-RkI.js";import{_ as B,h as T,r as u,e as U,f as n,g as i,j as e,t,x as L,y as F,u as r,s as p,k as C,l as G,F as N,m as V,p as q,q as g,c as S,L as O,v as Y,B as j,C as z,D as H,E as W,G as J}from"./CEFpPj_H.js";import{u as $}from"./BzMfPq7a.js";import{_ as K}from"./SdlkZ04P.js";const P=m=>(z("data-v-c90a8e56"),m=m(),H(),m),Q={class:"title-container"},X={class:"head-title"},Z={class:"header4"},ee={class:"options"},se={class:"d-flex flex-column-reverse mx-2"},ae=["placeholder"],te={class:"table-responsive"},le={key:0,class:"loading"},oe=P(()=>e("img",{src:W,alt:""},null,-1)),ne=[oe],ie={key:1,class:"product-tabel"},re={class:"d-flex align-items-center"},ce={class:"product-img"},de=["src"],ue={key:1,src:K,alt:""},me={class:"product-info d-flex flex-column align-items-start"},pe={class:"fw-bold"},_e={class:"badge rounded-pill bg-primary me-1"},he=["onClick"],fe={__name:"Customers",setup(m){const{public:{api:_,apiBase:h}}=j(),{locale:w}=T(),{$awn:k}=J();let c=u(),o=u(!1);const E=s=>{o.value=s};let d=u("");const A=U(()=>{var s;return(s=v.value)==null?void 0:s.filter(l=>l.firstName.toLowerCase().includes(d.value.toLowerCase())||l.lastName.toLowerCase().includes(d.value.toLowerCase()))});let f=u(!1),v=u();const b=async()=>{if(f.value=!0,w.value==="ar"){const{data:s,pending:l}=await $(`${_.GetAllCustomers}`,{credentials:"include",baseURL:h,headers:{"accept-language":"ar"}},"$tjHpGxM93M");S(()=>{s.value&&(v.value=s.value)})}else{const{data:s,pending:l}=await $(`${_.GetAllCustomers}`,{credentials:"include",baseURL:h,headers:{"accept-language":"en"}},"$YL9N9p7kHx");S(()=>{s.value&&(v.value=s.value)})}f.value=!1};b();const I=async()=>{await $(`${_.DeleteCustomer}/${c.value.id}`,{credentials:"include",baseURL:h,method:"DELETE"},"$qmrdzWaFc3"),b(),o.value=!1,w.value==="en"?k.success("Customer Deleted Successfully",{durations:{global:5e3}}):k.success("تم حذف الزبون بنجاح",{durations:{global:5e3}})};return(s,l)=>{const y=R,M=x;return n(),i(N,null,[e("div",{class:q(["contain",("useSidebar"in s?s.useSidebar:r(Y))().value?"shrink":""])},[e("div",Q,[e("div",X,[e("h4",Z,t(s.$i18n.locale==="ar"?"قائمة الزبائن":"Customers List"),1)]),e("div",ee,[e("div",se,[L(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>p(d)?d.value=a:d=a),id:"price",type:"text",required:"",placeholder:s.$i18n.locale==="ar"?"ابحث":"Search"},null,8,ae),[[F,r(d)]])]),e("div",{class:"reload btn btn-success",onClick:l[1]||(l[1]=a=>b())},[C(y,{icon:["fas","rotate-right"]}),G(" "+t(s.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)])])]),e("div",te,[r(f)?(n(),i("div",le,ne)):(n(),i("div",ie,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,t(s.$i18n.locale==="ar"?"الاسم":"Name"),1),e("th",null,t(s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email"),1),e("th",null,t(s.$i18n.locale==="ar"?"تاريخ الإنشاء":"Created At"),1),e("th",null,t(s.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),e("tbody",null,[(n(!0),i(N,null,V(r(A),a=>{var D;return L((n(),i("tr",{class:"rows",key:a.id},[e("td",re,[e("div",ce,[a.thumbnail?(n(),i("img",ue)):(n(),i("img",{key:0,src:a.thumbnail,alt:""},null,8,de))]),e("div",me,[e("h5",null,t(a.firstName),1),e("h5",null,t(a.lastName),1)])]),e("td",pe,"$"+t(a.email),1),e("td",null,[e("p",_e,t((D=a.created_at)==null?void 0:D.slice(0,10)),1)]),e("td",null,[e("span",{class:"delete",onClick:ve=>{p(o)?o.value=!0:o=!0,p(c)?c.value=a:c=a}},[C(y,{icon:["fas","trash"]})],8,he)])])),[[O,!a.is_admin]])}),128))])])]))])],2),C(M,{isOpen:r(o),onUpdateIsOpen:E},{header:g(()=>[e("h4",null,t(s.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:g(()=>[e("p",null,t(s.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+t(r(c).firstName+" "+r(c).lastName)+'"'+t(s.$i18n.locale==="ar"?"؟":"?"),1)]),footer:g(()=>[e("button",{class:"btn btn-secondary",onClick:l[2]||(l[2]=a=>p(o)?o.value=!1:o=!1)},t(s.$t("Close")),1),e("button",{class:"btn btn-danger",onClick:l[3]||(l[3]=a=>I())},t(s.$t("Delete")),1)]),_:1},8,["isOpen"])],64)}}},ke=B(fe,[["__scopeId","data-v-c90a8e56"]]);export{ke as default};
